---
apiVersion: v1
items:
- metadata:
    creationTimestamp: "2022-12-05T06:51:44Z"
    generateName: spire-agent-
    labels:
      app: spire-agent
      controller-revision-hash: 69b6bb49cf
      pod-template-generation: "1"
    name: spire-agent-4mvzx
    namespace: spire
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: spire-agent
      uid: 9d52c7b5-a381-408e-8b39-aea88193fae3
    resourceVersion: "961"
    uid: 86a8d29c-a5f0-45d2-9e94-67e12e78f864
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-worker2
    containers:
    - args:
      - -config
      - /run/spire/config/agent.conf
      image: gcr.io/spiffe-io/spire-agent:1.2.3
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-agent
          - healthcheck
          - -socketPath
          - /run/spire/sockets/agent.sock
        failureThreshold: 2
        initialDelaySeconds: 15
        periodSeconds: 60
        successThreshold: 1
        timeoutSeconds: 3
      name: spire-agent
      readinessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-agent
          - healthcheck
          - -socketPath
          - /run/spire/sockets/agent.sock
          - --shallow
        failureThreshold: 3
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/config
        name: spire-config
        readOnly: true
      - mountPath: /run/spire/bundle
        name: spire-bundle
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/tokens
        name: spire-token
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-dddhs
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    initContainers:
    - args:
      - -t
      - "30"
      - spire-server:8081
      image: gcr.io/spiffe-io/wait-for-it
      imagePullPolicy: IfNotPresent
      name: init
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-dddhs
        readOnly: true
    - command:
      - sh
      - -c
      - t=0; until [ -f /run/spire/bundle/bundle.crt 2>&1 ] || [ $t -eq 60 ]; do t=`expr
        $t + 1`; sleep 1; done
      image: gcr.io/spiffe-io/wait-for-it
      imagePullPolicy: IfNotPresent
      name: init-bundle
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/bundle
        name: spire-bundle
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-dddhs
        readOnly: true
    nodeName: kind-1-worker2
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: spire-agent
    serviceAccountName: spire-agent
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - configMap:
        defaultMode: 420
        name: spire-agent
      name: spire-config
    - configMap:
        defaultMode: 420
        name: spire-bundle
      name: spire-bundle
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: spire-token
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            audience: spire-server
            expirationSeconds: 7200
            path: spire-agent
    - name: kube-api-access-dddhs
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:03Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:15Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:15Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:51:44Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://59f2e6d4915786178eca40cb670095db40b763c3b8347fe57d10149b59232348
      image: gcr.io/spiffe-io/spire-agent:1.2.3
      imageID: gcr.io/spiffe-io/spire-agent@sha256:e0791477303c598a77c08e63933c06805b773bf1b9c12f540cbd8682e631a510
      lastState: {}
      name: spire-agent
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-05T06:52:10Z"
    hostIP: 172.18.0.2
    initContainerStatuses:
    - containerID: containerd://63c762c3edd267590d1d8f9e311313802b25905a94cc4b1978220befd0e7ef95
      image: gcr.io/spiffe-io/wait-for-it:latest
      imageID: gcr.io/spiffe-io/wait-for-it@sha256:3facff26e582e57e3b994d3a3b95fc06475bb02a3dc6647ce6c91f4c3c2534b5
      lastState: {}
      name: init
      ready: true
      restartCount: 0
      state:
        terminated:
          containerID: containerd://63c762c3edd267590d1d8f9e311313802b25905a94cc4b1978220befd0e7ef95
          exitCode: 0
          finishedAt: "2022-12-05T06:52:02Z"
          reason: Completed
          startedAt: "2022-12-05T06:51:54Z"
    - containerID: containerd://d46d40949d02e7ce72d71ef35e3e4dc7602fc698800a7c62e8d1ff9e09f426f7
      image: gcr.io/spiffe-io/wait-for-it:latest
      imageID: gcr.io/spiffe-io/wait-for-it@sha256:3facff26e582e57e3b994d3a3b95fc06475bb02a3dc6647ce6c91f4c3c2534b5
      lastState: {}
      name: init-bundle
      ready: true
      restartCount: 0
      state:
        terminated:
          containerID: containerd://d46d40949d02e7ce72d71ef35e3e4dc7602fc698800a7c62e8d1ff9e09f426f7
          exitCode: 0
          finishedAt: "2022-12-05T06:52:03Z"
          reason: Completed
          startedAt: "2022-12-05T06:52:03Z"
    phase: Running
    podIP: 172.18.0.2
    podIPs:
    - ip: 172.18.0.2
    qosClass: BestEffort
    startTime: "2022-12-05T06:51:44Z"
- metadata:
    creationTimestamp: "2022-12-05T06:51:44Z"
    generateName: spire-agent-
    labels:
      app: spire-agent
      controller-revision-hash: 69b6bb49cf
      pod-template-generation: "1"
    name: spire-agent-4w5jm
    namespace: spire
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: spire-agent
      uid: 9d52c7b5-a381-408e-8b39-aea88193fae3
    resourceVersion: "972"
    uid: 06003d0f-abb2-45cd-9b1b-865d8cadf6de
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-worker
    containers:
    - args:
      - -config
      - /run/spire/config/agent.conf
      image: gcr.io/spiffe-io/spire-agent:1.2.3
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-agent
          - healthcheck
          - -socketPath
          - /run/spire/sockets/agent.sock
        failureThreshold: 2
        initialDelaySeconds: 15
        periodSeconds: 60
        successThreshold: 1
        timeoutSeconds: 3
      name: spire-agent
      readinessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-agent
          - healthcheck
          - -socketPath
          - /run/spire/sockets/agent.sock
          - --shallow
        failureThreshold: 3
        initialDelaySeconds: 5
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/config
        name: spire-config
        readOnly: true
      - mountPath: /run/spire/bundle
        name: spire-bundle
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/tokens
        name: spire-token
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-5xdxq
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    initContainers:
    - args:
      - -t
      - "30"
      - spire-server:8081
      image: gcr.io/spiffe-io/wait-for-it
      imagePullPolicy: IfNotPresent
      name: init
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-5xdxq
        readOnly: true
    - command:
      - sh
      - -c
      - t=0; until [ -f /run/spire/bundle/bundle.crt 2>&1 ] || [ $t -eq 60 ]; do t=`expr
        $t + 1`; sleep 1; done
      image: gcr.io/spiffe-io/wait-for-it
      imagePullPolicy: IfNotPresent
      name: init-bundle
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/bundle
        name: spire-bundle
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-5xdxq
        readOnly: true
    nodeName: kind-1-worker
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: spire-agent
    serviceAccountName: spire-agent
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - configMap:
        defaultMode: 420
        name: spire-agent
      name: spire-config
    - configMap:
        defaultMode: 420
        name: spire-bundle
      name: spire-bundle
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: spire-token
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            audience: spire-server
            expirationSeconds: 7200
            path: spire-agent
    - name: kube-api-access-5xdxq
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:04Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:20Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:20Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:51:44Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://2f67037e2c23567eb1fe265150adc409e9c3a32f07c6f1d954d4062ecf1eb447
      image: gcr.io/spiffe-io/spire-agent:1.2.3
      imageID: gcr.io/spiffe-io/spire-agent@sha256:e0791477303c598a77c08e63933c06805b773bf1b9c12f540cbd8682e631a510
      lastState: {}
      name: spire-agent
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-05T06:52:10Z"
    hostIP: 172.18.0.3
    initContainerStatuses:
    - containerID: containerd://8747007c1a7d84fd30d660d2212cb635d668469ba2df8b60307b327f13b28131
      image: gcr.io/spiffe-io/wait-for-it:latest
      imageID: gcr.io/spiffe-io/wait-for-it@sha256:3facff26e582e57e3b994d3a3b95fc06475bb02a3dc6647ce6c91f4c3c2534b5
      lastState: {}
      name: init
      ready: true
      restartCount: 0
      state:
        terminated:
          containerID: containerd://8747007c1a7d84fd30d660d2212cb635d668469ba2df8b60307b327f13b28131
          exitCode: 0
          finishedAt: "2022-12-05T06:52:01Z"
          reason: Completed
          startedAt: "2022-12-05T06:51:50Z"
    - containerID: containerd://e4a0e686d91d700a4d4cdfb10188a9e80bcc970ce26113f909e043f814d9057f
      image: gcr.io/spiffe-io/wait-for-it:latest
      imageID: gcr.io/spiffe-io/wait-for-it@sha256:3facff26e582e57e3b994d3a3b95fc06475bb02a3dc6647ce6c91f4c3c2534b5
      lastState: {}
      name: init-bundle
      ready: true
      restartCount: 0
      state:
        terminated:
          containerID: containerd://e4a0e686d91d700a4d4cdfb10188a9e80bcc970ce26113f909e043f814d9057f
          exitCode: 0
          finishedAt: "2022-12-05T06:52:03Z"
          reason: Completed
          startedAt: "2022-12-05T06:52:02Z"
    phase: Running
    podIP: 172.18.0.3
    podIPs:
    - ip: 172.18.0.3
    qosClass: BestEffort
    startTime: "2022-12-05T06:51:44Z"
- metadata:
    creationTimestamp: "2022-12-05T06:51:44Z"
    generateName: spire-server-
    labels:
      app: spire-server
      controller-revision-hash: spire-server-56cf88f8cf
      statefulset.kubernetes.io/pod-name: spire-server-0
    name: spire-server-0
    namespace: spire
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: spire-server
      uid: 69480a8f-18a4-4d45-b07b-56055fd92048
    resourceVersion: "903"
    uid: 6f77a4c9-a73f-46d3-a2c4-265e9c76a58f
  spec:
    containers:
    - args:
      - -config
      - /run/spire/config/server.conf
      image: gcr.io/spiffe-io/spire-server:1.2.3
      imagePullPolicy: IfNotPresent
      lifecycle:
        postStart:
          exec:
            command:
            - sleep
            - "2"
      livenessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-server
          - healthcheck
        failureThreshold: 2
        initialDelaySeconds: 15
        periodSeconds: 60
        successThreshold: 1
        timeoutSeconds: 3
      name: spire-server
      ports:
      - containerPort: 8081
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - /opt/spire/bin/spire-server
          - healthcheck
          - --shallow
        failureThreshold: 3
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/config
        name: spire-config
        readOnly: true
      - mountPath: /tmp
        name: spire-registration-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-ptzfx
        readOnly: true
    - args:
      - -config
      - /run/spire/config/k8s-workload-registrar.conf
      env:
      - name: MY_POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      image: gcr.io/spiffe-io/k8s-workload-registrar:1.2.3
      imagePullPolicy: IfNotPresent
      name: k8s-workload-registrar
      ports:
      - containerPort: 9443
        name: webhook
        protocol: TCP
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/config
        name: k8s-workload-registrar-config
        readOnly: true
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /tmp
        name: spire-registration-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-ptzfx
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostname: spire-server-0
    nodeName: kind-1-worker2
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: spire-server
    serviceAccountName: spire-server
    shareProcessNamespace: true
    subdomain: spire-server
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: spire-server
      name: spire-config
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - configMap:
        defaultMode: 420
        name: k8s-workload-registrar
      name: k8s-workload-registrar-config
    - emptyDir: {}
      name: spire-registration-socket
    - name: kube-api-access-ptzfx
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:51:44Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:00Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:52:00Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-05T06:51:44Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://10dda7445ece62ec2d55f53f09767162a5612d88095fea830c1696afec934e7d
      image: gcr.io/spiffe-io/k8s-workload-registrar:1.2.3
      imageID: gcr.io/spiffe-io/k8s-workload-registrar@sha256:46cc26598ce10c34c67e5ee1a71f212b77d8d5c52c5723a1cebed1bca3a8f9dd
      lastState: {}
      name: k8s-workload-registrar
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-05T06:51:59Z"
    - containerID: containerd://78d15c031d0e0baf8897964bc9d1174d70d9cb42423d17fc85cd7a37901c2015
      image: gcr.io/spiffe-io/spire-server:1.2.3
      imageID: gcr.io/spiffe-io/spire-server@sha256:b02e6f3604513515fe131768be14a9c8b2e933ce56d2bdc91972bbf933e42dd6
      lastState: {}
      name: spire-server
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-05T06:51:51Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.1.2
    podIPs:
    - ip: 10.244.1.2
    qosClass: BestEffort
    startTime: "2022-12-05T06:51:44Z"
kind: PodList
metadata:
  resourceVersion: "15803"

==== START logs for container istio-init of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====
2022-12-05T07:16:45.477795Z	info	Istio iptables environment:
ENVOY_PORT=
INBOUND_CAPTURE_PORT=
ISTIO_INBOUND_INTERCEPTION_MODE=
ISTIO_INBOUND_TPROXY_ROUTE_TABLE=
ISTIO_INBOUND_PORTS=
ISTIO_OUTBOUND_PORTS=
ISTIO_LOCAL_EXCLUDE_PORTS=
ISTIO_EXCLUDE_INTERFACES=
ISTIO_SERVICE_CIDR=
ISTIO_SERVICE_EXCLUDE_CIDR=
ISTIO_META_DNS_CAPTURE=
INVALID_DROP=

2022-12-05T07:16:45.478047Z	info	Istio iptables variables:
PROXY_PORT=15001
PROXY_INBOUND_CAPTURE_PORT=15006
PROXY_TUNNEL_PORT=15008
PROXY_UID=1337
PROXY_GID=1337
INBOUND_INTERCEPTION_MODE=REDIRECT
INBOUND_TPROXY_MARK=1337
INBOUND_TPROXY_ROUTE_TABLE=133
INBOUND_PORTS_INCLUDE=*
INBOUND_PORTS_EXCLUDE=15090,15021,15020
OUTBOUND_OWNER_GROUPS_INCLUDE=*
OUTBOUND_OWNER_GROUPS_EXCLUDE=
OUTBOUND_IP_RANGES_INCLUDE=*
OUTBOUND_IP_RANGES_EXCLUDE=
OUTBOUND_PORTS_INCLUDE=
OUTBOUND_PORTS_EXCLUDE=
KUBE_VIRT_INTERFACES=
ENABLE_INBOUND_IPV6=false
DNS_CAPTURE=false
DROP_INVALID=false
CAPTURE_ALL_DNS=false
DNS_SERVERS=[],[]
OUTPUT_PATH=
NETWORK_NAMESPACE=
CNI_MODE=false
HOST_NSENTER_EXEC=false
EXCLUDE_INTERFACES=

2022-12-05T07:16:45.478233Z	info	Writing following contents to rules file: /tmp/iptables-rules-1670224605478081367.txt2404505548
* nat
-N ISTIO_INBOUND
-N ISTIO_REDIRECT
-N ISTIO_IN_REDIRECT
-N ISTIO_OUTPUT
-A ISTIO_INBOUND -p tcp --dport 15008 -j RETURN
-A ISTIO_REDIRECT -p tcp -j REDIRECT --to-ports 15001
-A ISTIO_IN_REDIRECT -p tcp -j REDIRECT --to-ports 15006
-A PREROUTING -p tcp -j ISTIO_INBOUND
-A ISTIO_INBOUND -p tcp --dport 15090 -j RETURN
-A ISTIO_INBOUND -p tcp --dport 15021 -j RETURN
-A ISTIO_INBOUND -p tcp --dport 15020 -j RETURN
-A ISTIO_INBOUND -p tcp -j ISTIO_IN_REDIRECT
-A OUTPUT -p tcp -j ISTIO_OUTPUT
-A ISTIO_OUTPUT -o lo -s 127.0.0.6/32 -j RETURN
-A ISTIO_OUTPUT -o lo ! -d 127.0.0.1/32 -m owner --uid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -m owner --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -o lo ! -d 127.0.0.1/32 -m owner --gid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --gid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -m owner --gid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -d 127.0.0.1/32 -j RETURN
-A ISTIO_OUTPUT -j ISTIO_REDIRECT
COMMIT
2022-12-05T07:16:45.478258Z	info	Running command: iptables-restore --noflush /tmp/iptables-rules-1670224605478081367.txt2404505548
2022-12-05T07:16:45.484808Z	info	Writing following contents to rules file: /tmp/ip6tables-rules-1670224605484652721.txt1070890452

2022-12-05T07:16:45.484884Z	info	Running command: ip6tables-restore --noflush /tmp/ip6tables-rules-1670224605484652721.txt1070890452
2022-12-05T07:16:45.487448Z	info	Running command: iptables-save 
2022-12-05T07:16:45.490162Z	info	Command output: 
# Generated by iptables-save v1.8.7 on Mon Dec  5 07:16:45 2022
*nat
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]
:ISTIO_INBOUND - [0:0]
:ISTIO_IN_REDIRECT - [0:0]
:ISTIO_OUTPUT - [0:0]
:ISTIO_REDIRECT - [0:0]
-A PREROUTING -p tcp -j ISTIO_INBOUND
-A OUTPUT -p tcp -j ISTIO_OUTPUT
-A ISTIO_INBOUND -p tcp -m tcp --dport 15008 -j RETURN
-A ISTIO_INBOUND -p tcp -m tcp --dport 15090 -j RETURN
-A ISTIO_INBOUND -p tcp -m tcp --dport 15021 -j RETURN
-A ISTIO_INBOUND -p tcp -m tcp --dport 15020 -j RETURN
-A ISTIO_INBOUND -p tcp -j ISTIO_IN_REDIRECT
-A ISTIO_IN_REDIRECT -p tcp -j REDIRECT --to-ports 15006
-A ISTIO_OUTPUT -s 127.0.0.6/32 -o lo -j RETURN
-A ISTIO_OUTPUT ! -d 127.0.0.1/32 -o lo -m owner --uid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -m owner --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT ! -d 127.0.0.1/32 -o lo -m owner --gid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --gid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -m owner --gid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -d 127.0.0.1/32 -j RETURN
-A ISTIO_OUTPUT -j ISTIO_REDIRECT
-A ISTIO_REDIRECT -p tcp -j REDIRECT --to-ports 15001
COMMIT
# Completed on Mon Dec  5 07:16:45 2022

==== END logs for container istio-init of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====
==== START logs for container helloworld of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====
 * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
127.0.0.6 - - [05/Dec/2022 08:01:33] "GET /hello HTTP/1.1" 200 -
==== END logs for container helloworld of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====
==== START logs for container istio-proxy of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====
2022-12-05T07:17:35.563944Z	info	FLAG: --concurrency="2"
2022-12-05T07:17:35.564043Z	info	FLAG: --domain="sample.svc.cluster.local"
2022-12-05T07:17:35.564050Z	info	FLAG: --help="false"
2022-12-05T07:17:35.564052Z	info	FLAG: --log_as_json="false"
2022-12-05T07:17:35.564053Z	info	FLAG: --log_caller=""
2022-12-05T07:17:35.564055Z	info	FLAG: --log_output_level="default:info"
2022-12-05T07:17:35.564056Z	info	FLAG: --log_rotate=""
2022-12-05T07:17:35.564058Z	info	FLAG: --log_rotate_max_age="30"
2022-12-05T07:17:35.564060Z	info	FLAG: --log_rotate_max_backups="1000"
2022-12-05T07:17:35.564061Z	info	FLAG: --log_rotate_max_size="104857600"
2022-12-05T07:17:35.564063Z	info	FLAG: --log_stacktrace_level="default:none"
2022-12-05T07:17:35.564074Z	info	FLAG: --log_target="[stdout]"
2022-12-05T07:17:35.564076Z	info	FLAG: --meshConfig="./etc/istio/config/mesh"
2022-12-05T07:17:35.564078Z	info	FLAG: --outlierLogPath=""
2022-12-05T07:17:35.564080Z	info	FLAG: --proxyComponentLogLevel="misc:error"
2022-12-05T07:17:35.564081Z	info	FLAG: --proxyLogLevel="warning"
2022-12-05T07:17:35.564083Z	info	FLAG: --serviceCluster="istio-proxy"
2022-12-05T07:17:35.564084Z	info	FLAG: --stsPort="0"
2022-12-05T07:17:35.564086Z	info	FLAG: --templateFile=""
2022-12-05T07:17:35.564087Z	info	FLAG: --tokenManagerPlugin="GoogleTokenExchange"
2022-12-05T07:17:35.564090Z	info	FLAG: --vklog="0"
2022-12-05T07:17:35.564092Z	info	Version 1.16.0-8f2e2dc5d57f6f1f7a453e03ec96ca72b2205783-Clean
2022-12-05T07:17:35.571111Z	info	Maximum file descriptors (ulimit -n): 1048576
2022-12-05T07:17:35.571530Z	info	Proxy role	ips=[10.244.1.9] type=sidecar id=helloworld-v1-78b9f5c87f-g5vjn.sample domain=sample.svc.cluster.local
2022-12-05T07:17:35.571802Z	info	Apply proxy config from env {"meshId":"mesh1"}

2022-12-05T07:17:35.590384Z	info	Effective config: binaryPath: /usr/local/bin/envoy
concurrency: 2
configPath: ./etc/istio/proxy
controlPlaneAuthPolicy: MUTUAL_TLS
discoveryAddress: istiod.istio-system.svc:15012
drainDuration: 45s
meshId: mesh1
parentShutdownDuration: 60s
proxyAdminPort: 15000
serviceCluster: istio-proxy
statNameLength: 189
statusPort: 15020
terminationDrainDuration: 5s
tracing:
  zipkin:
    address: zipkin.istio-system:9411

2022-12-05T07:17:35.590482Z	info	JWT policy is third-party-jwt
2022-12-05T07:17:35.590499Z	info	using credential fetcher of JWT type in cluster.local trust domain
2022-12-05T07:17:35.693921Z	info	Workload SDS socket not found. Starting Istio SDS Server
2022-12-05T07:17:35.694399Z	info	CA Endpoint istiod.istio-system.svc:15012, provider Citadel
2022-12-05T07:17:35.694497Z	info	Using CA istiod.istio-system.svc:15012 cert with certs: var/run/secrets/istio/root-cert.pem
2022-12-05T07:17:35.694142Z	info	Opening status port 15020
2022-12-05T07:17:35.696867Z	info	citadelclient	Citadel client using custom root cert: var/run/secrets/istio/root-cert.pem
2022-12-05T07:17:35.729847Z	info	ads	All caches have been synced up in 178.866215ms, marking server ready
2022-12-05T07:17:35.732379Z	info	xdsproxy	Initializing with upstream address "istiod.istio-system.svc:15012" and cluster "Kubernetes"
2022-12-05T07:17:35.732479Z	info	sds	Starting SDS grpc server
2022-12-05T07:17:35.738135Z	info	Pilot SAN: [istiod.istio-system.svc]
2022-12-05T07:17:35.741192Z	info	Starting proxy agent
2022-12-05T07:17:35.741440Z	info	starting Http service at 127.0.0.1:15004
2022-12-05T07:17:35.741526Z	info	starting
2022-12-05T07:17:35.741907Z	info	Envoy command: [-c etc/istio/proxy/envoy-rev.json --drain-time-s 45 --drain-strategy immediate --parent-shutdown-time-s 60 --local-address-ip-version v4 --file-flush-interval-msec 1000 --disable-hot-restart --log-format %Y-%m-%dT%T.%fZ	%l	envoy %n	%v -l warning --component-log-level misc:error --concurrency 2]
2022-12-05T07:17:35.940988Z	info	cache	generated new workload certificate	latency=208.90666ms ttl=23h59m59.059021943s
2022-12-05T07:17:35.941055Z	info	cache	Root cert has changed, start rotating root cert
2022-12-05T07:17:35.941092Z	info	ads	XDS: Incremental Pushing:0 ConnectedEndpoints:0 Version:
2022-12-05T07:17:35.941143Z	info	cache	returned workload trust anchor from cache	ttl=23h59m59.058859609s
2022-12-05T07:17:36.013150Z	info	xdsproxy	connected to upstream XDS server: istiod.istio-system.svc:15012
2022-12-05T07:17:36.065638Z	info	ads	ADS: new connection for node:helloworld-v1-78b9f5c87f-g5vjn.sample-1
2022-12-05T07:17:36.066896Z	info	ads	ADS: new connection for node:helloworld-v1-78b9f5c87f-g5vjn.sample-2
2022-12-05T07:17:36.069108Z	info	cache	returned workload certificate from cache	ttl=23h59m58.930902815s
2022-12-05T07:17:36.070793Z	info	ads	SDS: PUSH request for node:helloworld-v1-78b9f5c87f-g5vjn.sample resources:1 size:4.0kB resource:default
2022-12-05T07:17:36.071638Z	info	cache	returned workload trust anchor from cache	ttl=23h59m58.928369559s
2022-12-05T07:17:36.072277Z	info	ads	SDS: PUSH request for node:helloworld-v1-78b9f5c87f-g5vjn.sample resources:1 size:1.1kB resource:ROOTCA
2022-12-05T07:17:36.433416Z	info	Readiness succeeded in 914.286436ms
2022-12-05T07:17:36.434377Z	info	Envoy proxy is ready
2022-12-05T07:48:04.075085Z	info	xdsproxy	connected to upstream XDS server: istiod.istio-system.svc:15012
[2022-12-05T08:01:33.221Z] "GET /hello HTTP/1.1" 200 - via_upstream - "-" 0 60 291 282 "-" "curl/7.81.0" "7c25eadf-f510-4494-8601-62f621c22325" "helloworld.sample.svc:5000" "10.244.1.9:5000" inbound|5000|| 127.0.0.6:37527 10.244.1.9:5000 10.244.1.11:46166 outbound_.5000_._.helloworld.sample.svc.cluster.local default
2022-12-05T08:17:45.572542Z	info	xdsproxy	connected to upstream XDS server: istiod.istio-system.svc:15012
2022-12-05T08:49:55.693695Z	info	xdsproxy	connected to upstream XDS server: istiod.istio-system.svc:15012
==== END logs for container istio-proxy of pod sample/helloworld-v1-78b9f5c87f-g5vjn ====

---
apiVersion: v1
items:
- metadata:
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: admission-webhook-k8s-688dfc7685-
    labels:
      app: admission-webhook-k8s
      pod-template-hash: 688dfc7685
    name: admission-webhook-k8s-688dfc7685-4wfzj
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: admission-webhook-k8s-688dfc7685
      uid: aa36d050-002a-4337-ba06-41c7f01cc874
    resourceVersion: "981"
    uid: f94e9992-f38f-4056-9b76-60444544378d
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_SERVICE_NAME
        value: admission-webhook-svc
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: NSM_ANNOTATION
        value: networkservicemesh.io
      - name: NSM_CONTAINER_IMAGES
        value: ghcr.io/networkservicemesh/cmd-nsc:v1.7.0-rc.2
      - name: NSM_INIT_CONTAINER_IMAGES
        value: ghcr.io/networkservicemesh/cmd-nsc-init:v1.7.0-rc.2
      - name: NSM_LABELS
        value: spiffe.io/spiffe-id:true
      - name: NSM_ENVS
        value: NSM_LOG_LEVEL=TRACE
      image: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: admission-webhook-k8s
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /ready
          port: 443
          scheme: HTTPS
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-zq58c
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: admission-webhook-sa
    serviceAccountName: admission-webhook-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: kube-api-access-zq58c
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:29Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:29Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://8d66bc1174aa1f53a77e6f5cb65660b33220ceebe6064aa1e7686e4816f18e61
      image: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s@sha256:ba40fe253887061cd2eb247155fa5e60810efb699576e9e0ed53ae1fc888eb94
      lastState: {}
      name: admission-webhook-k8s
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:34:29Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.7
    podIPs:
    - ip: 10.244.0.7
    qosClass: BestEffort
    startTime: "2022-12-21T04:34:21Z"
- metadata:
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: forwarder-vpp-
    labels:
      app: forwarder-vpp
      controller-revision-hash: 578fcbd7d
      pod-template-generation: "1"
      spiffe.io/spiffe-id: "true"
    name: forwarder-vpp-8kvg9
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: forwarder-vpp
      uid: 727ea0c8-6a06-4d11-a1c9-67f615ffe592
    resourceVersion: "1135"
    uid: 82ec4d59-acf8-4b00-93c1-c67121a04e0f
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-control-plane
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_TUNNEL_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_CONNECT_TO
        value: unix:///var/lib/networkservicemesh/nsm.io.sock
      - name: NSM_LISTEN_ON
        value: unix:///listen.on.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      image: ghcr.io/networkservicemesh/cmd-forwarder-vpp:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 25
        initialDelaySeconds: 10
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 2
      name: forwarder-vpp
      readinessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 120
        initialDelaySeconds: 1
        periodSeconds: 1
        successThreshold: 1
        timeoutSeconds: 2
      resources:
        limits:
          cpu: 525m
          memory: 500Mi
        requests:
          cpu: 150m
          memory: 500Mi
      securityContext:
        privileged: true
      startupProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 25
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/lib/networkservicemesh
        name: nsm-socket
      - mountPath: /var/lib/kubelet
        name: kubelet-socket
      - mountPath: /host/sys/fs/cgroup
        name: cgroup
      - mountPath: /host/dev/vfio
        name: vfio
      - mountPath: /var/run/vpp/external
        name: vpp
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-clmt9
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - hostPath:
        path: /var/lib/kubelet
        type: Directory
      name: kubelet-socket
    - hostPath:
        path: /sys/fs/cgroup
        type: Directory
      name: cgroup
    - hostPath:
        path: /dev/vfio
        type: DirectoryOrCreate
      name: vfio
    - hostPath:
        path: /var/run/vpp
        type: DirectoryOrCreate
      name: vpp
    - name: kube-api-access-clmt9
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:39Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:39Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://d104b56f874014ddba53b27a619246506a276e3e53f6c769a4fc3d5a7e20f6e0
      image: ghcr.io/networkservicemesh/cmd-forwarder-vpp:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-forwarder-vpp@sha256:4b61f63d47f03a79216bef7613652c5d4477921e2a803a6a37b945baa9469219
      lastState: {}
      name: forwarder-vpp
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:35:34Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 172.18.0.2
    podIPs:
    - ip: 172.18.0.2
    qosClass: Burstable
    startTime: "2022-12-21T04:34:21Z"
- metadata:
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: nsmgr-
    labels:
      app: nsmgr
      controller-revision-hash: dc4db49c6
      pod-template-generation: "1"
      spiffe.io/spiffe-id: "true"
    name: nsmgr-kqm9b
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: nsmgr
      uid: 8a71b00f-7170-4088-9a6e-9c606cfd9b7f
    resourceVersion: "1183"
    uid: 073167a0-ac66-4ac5-a60f-d79da55b8869
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-control-plane
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_REGISTRY_URL
        value: registry:5002
      - name: POD_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_LISTEN_ON
        value: unix:///var/lib/networkservicemesh/nsm.io.sock,tcp://[$(POD_IP)]:5001
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      image: ghcr.io/networkservicemesh/cmd-nsmgr:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 25
        initialDelaySeconds: 10
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 2
      name: nsmgr
      ports:
      - containerPort: 5001
        hostPort: 5001
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 120
        initialDelaySeconds: 1
        periodSeconds: 1
        successThreshold: 1
        timeoutSeconds: 2
      resources:
        limits:
          cpu: 400m
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 100Mi
      startupProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 25
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/lib/networkservicemesh
        name: nsm-socket
      - mountPath: /var/lib/networkservicemesh/config/
        name: exclude-prefixes-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-gsl6q
        readOnly: true
    - env:
      - name: NSM_LOG_LEVEL
        value: TRACE
      image: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: exclude-prefixes
      resources:
        limits:
          cpu: 75m
          memory: 40Mi
        requests:
          cpu: 75m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/lib/networkservicemesh/config/
        name: exclude-prefixes-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-gsl6q
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: nsmgr-sa
    serviceAccountName: nsmgr-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - emptyDir: {}
      name: exclude-prefixes-volume
    - name: kube-api-access-gsl6q
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:58Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:58Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://a961b6bee2dac0a71d9c2c6fb7ea0b77d71091cba98eac7bbba0ba2148f2ae75
      image: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s@sha256:3800b3afb1726014525354ae23822b6ec97156a81fc7921d59ca498df8b022ad
      lastState: {}
      name: exclude-prefixes
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:35:53Z"
    - containerID: containerd://3fd82c234c9b9385bf6789900015f9c70d33f21181a688814fd468ba7568b2ad
      image: ghcr.io/networkservicemesh/cmd-nsmgr:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-nsmgr@sha256:c8276d514d23649142c50d49626c5998b4791d646760a55c93ce620e179a6478
      lastState: {}
      name: nsmgr
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:35:00Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.11
    podIPs:
    - ip: 10.244.0.11
    qosClass: Burstable
    startTime: "2022-12-21T04:34:21Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: nsmgr-proxy-c874d5d87-
    labels:
      app: nsmgr-proxy
      pod-template-hash: c874d5d87
      spiffe.io/spiffe-id: "true"
    name: nsmgr-proxy-c874d5d87-kb7ws
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: nsmgr-proxy-c874d5d87
      uid: ecf39949-7b04-4dc3-b7df-6a1ed95d3ebb
    resourceVersion: "1146"
    uid: 1f90e676-0cd3-4d7e-afb6-8ca150a89540
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_REGISTRY_URL
        value: registry:5002
      - name: NSM_REGISTRY_PROXY_URL
        value: registry-proxy:5005
      - name: NSM_LISTEN_ON
        value: tcp://:5004
      - name: NSM_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_MAP_IP_FILE_PATH
        value: /etc/mapip/config.yaml
      image: ghcr.io/networkservicemesh/cmd-nsmgr-proxy:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: nsmgr-proxy
      ports:
      - containerPort: 5004
        hostPort: 5004
        protocol: TCP
      resources:
        limits:
          cpu: 400m
          memory: 100Mi
        requests:
          cpu: 200m
          memory: 100Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /etc/mapip
        name: mapip-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-b4t77
        readOnly: true
    - env:
      - name: NSM_OUTPUTPATH
        value: /etc/mapip/config.yaml
      - name: NSM_NODENAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      image: ghcr.io/networkservicemesh/cmd-map-ip-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: map-ip-k8s
      resources:
        limits:
          cpu: 50m
          memory: 25Mi
        requests:
          cpu: 50m
          memory: 25Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/mapip
        name: mapip-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-b4t77
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: nsmgr-proxy-sa
    serviceAccountName: nsmgr-proxy-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - emptyDir: {}
      name: mapip-volume
    - name: kube-api-access-b4t77
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:42Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:35:42Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://7b5b7ee9c2effc775b15ed91326bbb5a40efb13f17ead118c3e3bb553348e578
      image: ghcr.io/networkservicemesh/cmd-map-ip-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-map-ip-k8s@sha256:881ae9d07ee3893c7518d2fe3dbe285eb3cd51783920a3a1e6348e973a685e64
      lastState: {}
      name: map-ip-k8s
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:35:42Z"
    - containerID: containerd://6c0ca237a2270bfec3d9763dc3780e9bca0dbb098fb59608b7b2d26526e0d084
      image: ghcr.io/networkservicemesh/cmd-nsmgr-proxy:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-nsmgr-proxy@sha256:0b952636400f6555eca4136c72105a048e3c673d202a28a459342a24c61be1f4
      lastState: {}
      name: nsmgr-proxy
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:34:50Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.10
    podIPs:
    - ip: 10.244.0.10
    qosClass: Burstable
    startTime: "2022-12-21T04:34:21Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: registry-k8s-679b68767c-
    labels:
      app: registry
      pod-template-hash: 679b68767c
      spiffe.io/spiffe-id: "true"
    name: registry-k8s-679b68767c-55w7p
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: registry-k8s-679b68767c
      uid: 7246b2ab-4ee7-4764-84db-0babeacbd72b
    resourceVersion: "1003"
    uid: bccadc0c-2e06-46c8-b890-04d809d726fe
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: REGISTRY_K8S_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: REGISTRY_K8S_LOG_LEVEL
        value: TRACE
      - name: REGISTRY_K8S_LISTEN_ON
        value: tcp://:5002
      - name: REGISTRY_K8S_PROXY_REGISTRY_URL
        value: nsmgr-proxy:5004
      image: ghcr.io/networkservicemesh/cmd-registry-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: registry
      ports:
      - containerPort: 5002
        hostPort: 5002
        protocol: TCP
      resources:
        limits:
          cpu: 200m
          memory: 40Mi
        requests:
          cpu: 100m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-9nkk5
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: registry-k8s-sa
    serviceAccountName: registry-k8s-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - name: kube-api-access-9nkk5
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:39Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:39Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://d18c6bc259d856ac6e0cd924b003c8631f61e86462a47c89aca77ba460f6eebc
      image: ghcr.io/networkservicemesh/cmd-registry-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-registry-k8s@sha256:9dab6e8fc3baeb85b2e006c4958490a8ebae5d2c25ebbfb821947b9d8252b29b
      lastState: {}
      name: registry
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:34:38Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.8
    podIPs:
    - ip: 10.244.0.8
    qosClass: Burstable
    startTime: "2022-12-21T04:34:21Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T04:34:21Z"
    generateName: registry-proxy-5d4487556b-
    labels:
      app: registry-proxy
      pod-template-hash: 5d4487556b
      spiffe.io/spiffe-id: "true"
    name: registry-proxy-5d4487556b-kmtbq
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: registry-proxy-5d4487556b
      uid: 6ea0527c-0748-4a6b-b67c-2e8dea7df31d
    resourceVersion: "1021"
    uid: 661ad421-ca1f-488d-945f-dfa0bad3ce62
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_LISTEN_ON
        value: tcp://:5005
      - name: NSM_LOG_LEVEL
        value: TRACE
      image: ghcr.io/networkservicemesh/cmd-registry-proxy-dns:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: registry
      ports:
      - containerPort: 5005
        hostPort: 5005
        protocol: TCP
      resources:
        limits:
          cpu: 200m
          memory: 40Mi
        requests:
          cpu: 100m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-dmxt2
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - name: kube-api-access-dmxt2
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:44Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:44Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T04:34:21Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://059584ec638354f5f546772281c633a9158d3340e5b3692e60a0acbc4696031c
      image: ghcr.io/networkservicemesh/cmd-registry-proxy-dns:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-registry-proxy-dns@sha256:acc927976e92b0f95f38e645f1c9ca159513e7bf4df3da3f1d8d323cc7ce8587
      lastState: {}
      name: registry
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T04:34:44Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.9
    podIPs:
    - ip: 10.244.0.9
    qosClass: Burstable
    startTime: "2022-12-21T04:34:21Z"
kind: PodList
metadata:
  resourceVersion: "19317"

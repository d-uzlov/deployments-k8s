---
apiVersion: apps/v1
items:
- metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2022-12-23T13:23:14Z"
    generation: 1
    labels:
      app: nse-vl3-vpp
      pod-template-hash: 5d97745888
      spiffe.io/spiffe-id: "true"
    name: nse-vl3-vpp-5d97745888
    namespace: ns-dns-vl3
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: nse-vl3-vpp
      uid: e522b512-352a-4620-abf4-70265113cf5f
    resourceVersion: "1249"
    uid: 16ef52c9-46c1-4924-aeb7-71431ce9fde9
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: nse-vl3-vpp
        pod-template-hash: 5d97745888
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: nse-vl3-vpp
          pod-template-hash: 5d97745888
          spiffe.io/spiffe-id: "true"
      spec:
        containers:
        - env:
          - name: NSM_SERVICE_NAMES
            value: my-vl3-network
          - name: NSM_REGISTER_SERVICE
            value: "true"
          - name: NSM_DNS_TEMPLATES
            value: '{{ index .Labels "dnsName" }}.{{ .NetworkService }}.'
          - name: SPIFFE_ENDPOINT_SOCKET
            value: unix:///run/spire/sockets/agent.sock
          - name: NSM_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: NSM_LOG_LEVEL
            value: TRACE
          image: ghcr.io/networkservicemesh/cmd-nse-vl3-vpp:v1.7.0-rc.2
          imagePullPolicy: IfNotPresent
          name: nse
          resources:
            limits:
              cpu: 500m
              memory: 400Mi
            requests:
              cpu: 150m
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /run/spire/sockets
            name: spire-agent-socket
            readOnly: true
          - mountPath: /var/lib/networkservicemesh
            name: nsm-socket
            readOnly: true
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - hostPath:
            path: /run/spire/sockets
            type: Directory
          name: spire-agent-socket
        - hostPath:
            path: /var/lib/networkservicemesh
            type: DirectoryOrCreate
          name: nsm-socket
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
- metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2022-12-23T13:23:14Z"
    generation: 1
    labels:
      app: vl3-ipam
      pod-template-hash: 7d564f85b
      spiffe.io/spiffe-id: "true"
    name: vl3-ipam-7d564f85b
    namespace: ns-dns-vl3
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: vl3-ipam
      uid: 6bda67bb-67fc-440e-aafd-7c1b5c756743
    resourceVersion: "1267"
    uid: 6b65594a-4171-4cb9-8e57-98d2b315bfa1
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: vl3-ipam
        pod-template-hash: 7d564f85b
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: vl3-ipam
          pod-template-hash: 7d564f85b
          spiffe.io/spiffe-id: "true"
      spec:
        containers:
        - env:
          - name: SPIFFE_ENDPOINT_SOCKET
            value: unix:///run/spire/sockets/agent.sock
          - name: NSM_LISTEN_ON
            value: tcp://:5006
          - name: NSM_PREFIX
            value: 172.16.0.0/16
          - name: NSM_LOG_LEVEL
            value: TRACE
          image: ghcr.io/networkservicemesh/cmd-ipam-vl3:v1.7.0-rc.2
          imagePullPolicy: IfNotPresent
          name: vl3-ipam
          ports:
          - containerPort: 5006
            hostPort: 5006
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 40Mi
            requests:
              cpu: 100m
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /run/spire/sockets
            name: spire-agent-socket
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - hostPath:
            path: /run/spire/sockets
            type: Directory
          name: spire-agent-socket
        - hostPath:
            path: /var/lib/networkservicemesh
            type: DirectoryOrCreate
          name: nsm-socket
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
kind: ReplicaSetList
metadata:
  resourceVersion: "3077"

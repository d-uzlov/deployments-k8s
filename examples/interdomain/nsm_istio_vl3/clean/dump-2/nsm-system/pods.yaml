---
apiVersion: v1
items:
- metadata:
    creationTimestamp: "2022-12-21T23:41:10Z"
    generateName: admission-webhook-k8s-688dfc7685-
    labels:
      app: admission-webhook-k8s
      pod-template-hash: 688dfc7685
    name: admission-webhook-k8s-688dfc7685-n7z9f
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: admission-webhook-k8s-688dfc7685
      uid: 919b1361-1b93-4cdd-be0d-1fa918a98c68
    resourceVersion: "951"
    uid: 0a649852-33d2-40c9-acc7-8a2c14e8ed91
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_SERVICE_NAME
        value: admission-webhook-svc
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: NSM_ANNOTATION
        value: networkservicemesh.io
      - name: NSM_CONTAINER_IMAGES
        value: ghcr.io/networkservicemesh/cmd-nsc:v1.7.0-rc.2
      - name: NSM_INIT_CONTAINER_IMAGES
        value: ghcr.io/networkservicemesh/cmd-nsc-init:v1.7.0-rc.2
      - name: NSM_LABELS
        value: spiffe.io/spiffe-id:true
      - name: NSM_ENVS
        value: NSM_LOG_LEVEL=TRACE
      image: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: admission-webhook-k8s
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /ready
          port: 443
          scheme: HTTPS
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-g2l6t
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: admission-webhook-sa
    serviceAccountName: admission-webhook-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: kube-api-access-g2l6t
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:18Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:18Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://af0a6594196d976292afa25b573bc6af13ab73cc4bc3fdd506ec081b9cf3c327
      image: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-admission-webhook-k8s@sha256:ba40fe253887061cd2eb247155fa5e60810efb699576e9e0ed53ae1fc888eb94
      lastState: {}
      name: admission-webhook-k8s
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:41:18Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.7
    podIPs:
    - ip: 10.244.0.7
    qosClass: BestEffort
    startTime: "2022-12-21T23:41:10Z"
- metadata:
    creationTimestamp: "2022-12-21T23:41:11Z"
    generateName: forwarder-vpp-
    labels:
      app: forwarder-vpp
      controller-revision-hash: 578fcbd7d
      pod-template-generation: "1"
      spiffe.io/spiffe-id: "true"
    name: forwarder-vpp-lglmz
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: forwarder-vpp
      uid: 80a56701-17ae-4975-922b-1a540a563c93
    resourceVersion: "1062"
    uid: bc3dc09f-794a-4e9a-a303-65e04dbdadf4
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-control-plane
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_TUNNEL_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_CONNECT_TO
        value: unix:///var/lib/networkservicemesh/nsm.io.sock
      - name: NSM_LISTEN_ON
        value: unix:///listen.on.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      image: ghcr.io/networkservicemesh/cmd-forwarder-vpp:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 25
        initialDelaySeconds: 10
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 2
      name: forwarder-vpp
      readinessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 120
        initialDelaySeconds: 1
        periodSeconds: 1
        successThreshold: 1
        timeoutSeconds: 2
      resources:
        limits:
          cpu: 525m
          memory: 500Mi
        requests:
          cpu: 150m
          memory: 500Mi
      securityContext:
        privileged: true
      startupProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///listen.on.sock
        failureThreshold: 25
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/lib/networkservicemesh
        name: nsm-socket
      - mountPath: /var/lib/kubelet
        name: kubelet-socket
      - mountPath: /host/sys/fs/cgroup
        name: cgroup
      - mountPath: /host/dev/vfio
        name: vfio
      - mountPath: /var/run/vpp/external
        name: vpp
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-zbqqm
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - hostPath:
        path: /var/lib/kubelet
        type: Directory
      name: kubelet-socket
    - hostPath:
        path: /sys/fs/cgroup
        type: Directory
      name: cgroup
    - hostPath:
        path: /dev/vfio
        type: DirectoryOrCreate
      name: vfio
    - hostPath:
        path: /var/run/vpp
        type: DirectoryOrCreate
      name: vpp
    - name: kube-api-access-zbqqm
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:58Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:58Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://0b997ab3a535006b13e7e30726bd8391cbbe2425c2642417680dbb493c1656e8
      image: ghcr.io/networkservicemesh/cmd-forwarder-vpp:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-forwarder-vpp@sha256:4b61f63d47f03a79216bef7613652c5d4477921e2a803a6a37b945baa9469219
      lastState: {}
      name: forwarder-vpp
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:41:54Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 172.18.0.2
    podIPs:
    - ip: 172.18.0.2
    qosClass: Burstable
    startTime: "2022-12-21T23:41:11Z"
- metadata:
    creationTimestamp: "2022-12-21T23:41:11Z"
    generateName: nsmgr-
    labels:
      app: nsmgr
      controller-revision-hash: dc4db49c6
      pod-template-generation: "1"
      spiffe.io/spiffe-id: "true"
    name: nsmgr-j7ztp
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: nsmgr
      uid: 9309b900-d8bd-4f53-bedf-4e452fc9e164
    resourceVersion: "1127"
    uid: 46ab3cff-a8d2-4b28-ab42-bb0676a028bd
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-1-control-plane
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_REGISTRY_URL
        value: registry:5002
      - name: POD_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_LISTEN_ON
        value: unix:///var/lib/networkservicemesh/nsm.io.sock,tcp://[$(POD_IP)]:5001
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      image: ghcr.io/networkservicemesh/cmd-nsmgr:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 25
        initialDelaySeconds: 10
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 2
      name: nsmgr
      ports:
      - containerPort: 5001
        hostPort: 5001
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 120
        initialDelaySeconds: 1
        periodSeconds: 1
        successThreshold: 1
        timeoutSeconds: 2
      resources:
        limits:
          cpu: 400m
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 100Mi
      startupProbe:
        exec:
          command:
          - /bin/grpc-health-probe
          - -spiffe
          - -addr=unix:///var/lib/networkservicemesh/nsm.io.sock
        failureThreshold: 25
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/lib/networkservicemesh
        name: nsm-socket
      - mountPath: /var/lib/networkservicemesh/config/
        name: exclude-prefixes-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-g82x8
        readOnly: true
    - env:
      - name: NSM_LOG_LEVEL
        value: TRACE
      image: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: exclude-prefixes
      resources:
        limits:
          cpu: 75m
          memory: 40Mi
        requests:
          cpu: 75m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/lib/networkservicemesh/config/
        name: exclude-prefixes-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-g82x8
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: nsmgr-sa
    serviceAccountName: nsmgr-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - emptyDir: {}
      name: exclude-prefixes-volume
    - name: kube-api-access-g82x8
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:42:28Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:42:28Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://794261c58104bbc5ad28f86fb6fd6cb23190b64a144b98d7e72d0a87d205f618
      image: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-exclude-prefixes-k8s@sha256:3800b3afb1726014525354ae23822b6ec97156a81fc7921d59ca498df8b022ad
      lastState: {}
      name: exclude-prefixes
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:42:26Z"
    - containerID: containerd://9d0105af192733e732f2fe9a6b5e77aefb8d14e1d33b589650e0f10ddb46fd13
      image: ghcr.io/networkservicemesh/cmd-nsmgr:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-nsmgr@sha256:c8276d514d23649142c50d49626c5998b4791d646760a55c93ce620e179a6478
      lastState: {}
      name: nsmgr
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:42:04Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.11
    podIPs:
    - ip: 10.244.0.11
    qosClass: Burstable
    startTime: "2022-12-21T23:41:11Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T23:41:10Z"
    generateName: nsmgr-proxy-c874d5d87-
    labels:
      app: nsmgr-proxy
      pod-template-hash: c874d5d87
      spiffe.io/spiffe-id: "true"
    name: nsmgr-proxy-c874d5d87-j7c9v
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: nsmgr-proxy-c874d5d87
      uid: 40275df1-f7b7-407e-8b3a-f48c5167188f
    resourceVersion: "1089"
    uid: 7a53bfab-4a98-400a-b6c0-7e3cadea1035
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_LOG_LEVEL
        value: TRACE
      - name: NSM_REGISTRY_URL
        value: registry:5002
      - name: NSM_REGISTRY_PROXY_URL
        value: registry-proxy:5005
      - name: NSM_LISTEN_ON
        value: tcp://:5004
      - name: NSM_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSM_MAP_IP_FILE_PATH
        value: /etc/mapip/config.yaml
      image: ghcr.io/networkservicemesh/cmd-nsmgr-proxy:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: nsmgr-proxy
      ports:
      - containerPort: 5004
        hostPort: 5004
        protocol: TCP
      resources:
        limits:
          cpu: 400m
          memory: 100Mi
        requests:
          cpu: 200m
          memory: 100Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /etc/mapip
        name: mapip-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-n5sn9
        readOnly: true
    - env:
      - name: NSM_OUTPUTPATH
        value: /etc/mapip/config.yaml
      - name: NSM_NODENAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      image: ghcr.io/networkservicemesh/cmd-map-ip-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: map-ip-k8s
      resources:
        limits:
          cpu: 50m
          memory: 25Mi
        requests:
          cpu: 50m
          memory: 25Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/mapip
        name: mapip-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-n5sn9
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: nsmgr-proxy-sa
    serviceAccountName: nsmgr-proxy-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - emptyDir: {}
      name: mapip-volume
    - name: kube-api-access-n5sn9
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:42:12Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:42:12Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://70555130ba6864eb7fed4c2f16bcc705f274a8e2116e3f375bca8820403edc92
      image: ghcr.io/networkservicemesh/cmd-map-ip-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-map-ip-k8s@sha256:881ae9d07ee3893c7518d2fe3dbe285eb3cd51783920a3a1e6348e973a685e64
      lastState: {}
      name: map-ip-k8s
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:42:11Z"
    - containerID: containerd://d2364b5088b522983e1a6db409426308f65e2485f6bea418b6735021253cd5ce
      image: ghcr.io/networkservicemesh/cmd-nsmgr-proxy:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-nsmgr-proxy@sha256:0b952636400f6555eca4136c72105a048e3c673d202a28a459342a24c61be1f4
      lastState: {}
      name: nsmgr-proxy
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:41:23Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.8
    podIPs:
    - ip: 10.244.0.8
    qosClass: Burstable
    startTime: "2022-12-21T23:41:10Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T23:41:10Z"
    generateName: registry-k8s-679b68767c-
    labels:
      app: registry
      pod-template-hash: 679b68767c
      spiffe.io/spiffe-id: "true"
    name: registry-k8s-679b68767c-rxktt
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: registry-k8s-679b68767c
      uid: 48d310d0-01b4-4fe4-b540-9a1aaba3d862
    resourceVersion: "978"
    uid: 27645250-03f4-419b-8ea2-4fc98a2bb421
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: REGISTRY_K8S_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: REGISTRY_K8S_LOG_LEVEL
        value: TRACE
      - name: REGISTRY_K8S_LISTEN_ON
        value: tcp://:5002
      - name: REGISTRY_K8S_PROXY_REGISTRY_URL
        value: nsmgr-proxy:5004
      image: ghcr.io/networkservicemesh/cmd-registry-k8s:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: registry
      ports:
      - containerPort: 5002
        hostPort: 5002
        protocol: TCP
      resources:
        limits:
          cpu: 200m
          memory: 40Mi
        requests:
          cpu: 100m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-xwxql
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: registry-k8s-sa
    serviceAccountName: registry-k8s-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - name: kube-api-access-xwxql
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:31Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:31Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:10Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://8b0ded09480f4215016991fee0f3fe71127004ea4091913bdbf075eab891b1ef
      image: ghcr.io/networkservicemesh/cmd-registry-k8s:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-registry-k8s@sha256:9dab6e8fc3baeb85b2e006c4958490a8ebae5d2c25ebbfb821947b9d8252b29b
      lastState: {}
      name: registry
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:41:30Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.9
    podIPs:
    - ip: 10.244.0.9
    qosClass: Burstable
    startTime: "2022-12-21T23:41:10Z"
- metadata:
    annotations:
      spiffe.io/federatesWith: nsm.cluster2
    creationTimestamp: "2022-12-21T23:41:11Z"
    generateName: registry-proxy-5d4487556b-
    labels:
      app: registry-proxy
      pod-template-hash: 5d4487556b
      spiffe.io/spiffe-id: "true"
    name: registry-proxy-5d4487556b-n8kgr
    namespace: nsm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: registry-proxy-5d4487556b
      uid: c7a7412f-5465-40cf-b494-3c6b3690a402
    resourceVersion: "998"
    uid: ba8f26b4-0ff6-476f-b73b-00f102bc8fc2
  spec:
    containers:
    - env:
      - name: SPIFFE_ENDPOINT_SOCKET
        value: unix:///run/spire/sockets/agent.sock
      - name: NSM_LISTEN_ON
        value: tcp://:5005
      - name: NSM_LOG_LEVEL
        value: TRACE
      image: ghcr.io/networkservicemesh/cmd-registry-proxy-dns:v1.7.0-rc.2
      imagePullPolicy: IfNotPresent
      name: registry
      ports:
      - containerPort: 5005
        hostPort: 5005
        protocol: TCP
      resources:
        limits:
          cpu: 200m
          memory: 40Mi
        requests:
          cpu: 100m
          memory: 40Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-472jx
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-1-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: Directory
      name: spire-agent-socket
    - hostPath:
        path: /var/lib/networkservicemesh
        type: DirectoryOrCreate
      name: nsm-socket
    - name: kube-api-access-472jx
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:40Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:40Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2022-12-21T23:41:11Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://8ef5c8e18a2573189feeb62a22319b6d55e489f76af437dc314c6ea997f2bbd4
      image: ghcr.io/networkservicemesh/cmd-registry-proxy-dns:v1.7.0-rc.2
      imageID: ghcr.io/networkservicemesh/cmd-registry-proxy-dns@sha256:acc927976e92b0f95f38e645f1c9ca159513e7bf4df3da3f1d8d323cc7ce8587
      lastState: {}
      name: registry
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2022-12-21T23:41:39Z"
    hostIP: 172.18.0.2
    phase: Running
    podIP: 10.244.0.10
    podIPs:
    - ip: 10.244.0.10
    qosClass: Burstable
    startTime: "2022-12-21T23:41:11Z"
kind: PodList
metadata:
  resourceVersion: "5265"
